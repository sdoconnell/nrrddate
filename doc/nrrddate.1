.\" Automatically generated by Pandoc 2.17.1.1
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "NRRDDATE" "1" "June 13, 2022" "nrrddate 0.0.4" "User Manual"
.hy
.SH NAME
.PP
nrrddate - Terminal-based calendar management for nerds.
.SH SYNOPSIS
.PP
\f[B]nrrddate\f[R] \f[I]command\f[R] [\f[I]OPTION\f[R]]\&...
.SH DESCRIPTION
.PP
\f[B]nrrddate\f[R] is a terminal-based calendar management program with
advanced search options, formatted output, and event data stored in
local text files.
It can be run in either of two modes: command-line or interactive shell.
.SH OPTIONS
.TP
\f[B]-h\f[R], \f[B]\[en]help\f[R]
Display help information.
.TP
\f[B]-c\f[R], \f[B]\[en]config\f[R] \f[I]file\f[R]
Use a non-default configuration file.
.SH COMMANDS
.PP
\f[B]nrrddate\f[R] provides the following commands.
.TP
\f[B]archive\f[R] \f[I]alias\f[R] [\f[I]OPTION\f[R]]
Move an event to the archive directory of your data directory (by
default, $HOME/.local/share/nrrddate/archive).
The user will be prompted for confirmation.
Archiving an event removes it from all views, and is designed as a
method to save past events while removing old events from \f[B]list\f[R]
output.
.RS
.PP
\f[I]OPTIONS\f[R]
.TP
\f[B]-f\f[R], \f[B]\[en]force\f[R]
Force the archive operation, do not prompt for confirmation.
.RE
.TP
\f[B]config\f[R]
Edit the \f[B]nrrddate\f[R] configuration file.
.TP
\f[B]delete (rm)\f[R] \f[I]alias\f[R] [\f[I]OPTION\f[R]]
Delete an event and event file.
The user will be prompted for confirmation.
.RS
.PP
\f[I]OPTIONS\f[R]
.TP
\f[B]-f\f[R], \f[B]\[en]force\f[R]
Force deletion, do not prompt for confirmation.
.RE
.TP
\f[B]edit\f[R] \f[I]alias\f[R]
Edit an event file in the user\[cq]s editor (defined by the $EDITOR
environment variable).
If $EDITOR is not defined, an error message will report that.
.TP
\f[B]export\f[R] \f[I]searchterm\f[R]
Search and output results in VEVENT format, to STDOUT.
.TP
\f[B]freebusy\f[R] \f[I]interval\f[R]
Output free/busy information in iCalendar VEVENT format for a given
future interval, expressed as [Xd][Yh][Zm] (for days, hours, and
minutes).
.TP
\f[B]info\f[R] \f[I]alias\f[R] [\f[I]OPTION\f[R]]
Show the full details about an event.
.RS
.PP
\f[I]OPTIONS\f[R]
.TP
\f[B]-p\f[R], \f[B]\[en]page\f[R]
Page the command output through $PAGER.
.RE
.TP
\f[B]invite\f[R] \f[I]alias\f[R]
Send meeting invites for an event.
The \f[I]user_name\f[R], \f[I]user_email\f[R], and \f[I]mailer_cmd\f[R]
configuration values must be set in order to send invite emails.
.TP
\f[B]list (ls)\f[R] <\f[I]alias\f[R] | \f[I]view\f[R]> [\f[I]OPTION\f[R]]\&...
List events matching a specific alias or one of the following views:
.RS
.IP \[bu] 2
\f[I]agenda\f[R] (\f[I]lsa\f[R]) : Today\[cq]s events that are yet to be
done.
.IP \[bu] 2
\f[I]today\f[R] (\f[I]lstd\f[R]) : All events for today.
.IP \[bu] 2
\f[I]yesterday\f[R] (\f[I]lspd\f[R]) : All events for yesterday.
.IP \[bu] 2
\f[I]tomorrow\f[R] (\f[I]lsnd\f[R]) : All events for tomorrow.
.IP \[bu] 2
\f[I]thisweek\f[R] (\f[I]lstw\f[R]) : All events for this week.
.IP \[bu] 2
\f[I]nextweek\f[R] (\f[I]lsnw\f[R]) : All events for next week.
.IP \[bu] 2
\f[I]lastweek\f[R] (\f[I]lspw\f[R]) : All events for last week.
.IP \[bu] 2
\f[I]thismonth\f[R] (\f[I]lstm\f[R]) : All events for this month.
.IP \[bu] 2
\f[I]nextmonth\f[R] (\f[I]lsnm\f[R]) : All events for next month.
.IP \[bu] 2
\f[I]lastmonth\f[R] (\f[I]lspm\f[R]) : All events for last month.
.IP \[bu] 2
\f[I]thisyear\f[R] (\f[I]lsty\f[R]) : All events for this year.
.IP \[bu] 2
\f[I]nextyear\f[R] (\f[I]lsny\f[R]) : All events for next year.
.IP \[bu] 2
\f[I]lastyear\f[R] (\f[I]lspy\f[R]) : All events for last year.
.IP \[bu] 2
\f[I]custom\f[R] (\f[I]lsc\f[R]) : All events in a date(time) range
between \f[B]\[en]start\f[R] and \f[B]\[en]end\f[R].
.PP
\f[I]OPTIONS\f[R]
.TP
\f[B]-p\f[R], \f[B]\[en]page\f[R]
Page the command output through $PAGER.
.TP
\f[B]\[en]calendar\f[R] \f[I]calendar\f[R]
Filter listed events to only this calendar.
.TP
\f[B]\[en]start\f[R] \f[I]YYYY-MM-DD[ HH:MM]\f[R]
The start date(time) for a custom range.
.TP
\f[B]\[en]end\f[R] \f[I]YYYY-MM-DD[ HH:MM]\f[R]
The end date(time) for a custom range.
.RE
.TP
\f[B]modify (mod)\f[R] \f[I]alias\f[R] [\f[I]OPTION\f[R]]\&...
Modify an event.
.RS
.PP
\f[I]OPTIONS\f[R]
.TP
\f[B]\[en]calendar\f[R] \f[I]calendar\f[R]
The event calendar.
.TP
\f[B]\[en]description\f[R] \f[I]description\f[R]
The event description.
.TP
\f[B]\[en]end\f[R] <\f[I]YYYY-MM-DD[ HH:MM]\f[R] | \f[I]expression\f[R]>
The event end date(time).
This may be either a specific date(time) or an expression of duration in
the form of +[Xd][Yh][Zm] (for days, hours, and minutes).
If date(time) is provided, \f[B]\[en]end\f[R] must be later than the
event \f[I]start\f[R] date.
.TP
\f[B]\[en]location\f[R] \f[I]location\f[R]
The event location.
.TP
\f[B]\[en]notes\f[R] \f[I]text\f[R]
Notes to add to the event.
Be sure to properly escape the text if it includes special characters or
newlines that may be interpretted by the shell.
Using this option, any existing notes on the event will be replaced.
This command option is included mainly for the purpose of automated note
insertion (i.e., via script or command).
For more reliable note editing, use the \f[B]notes\f[R] command.
.TP
\f[B]\[en]organizer\f[R] \f[I]name\f[R]
The organizer for an event.
If an event has attendees and no \f[I]organizer\f[R] is specified, the
user is assumed to be the event organizer.
.TP
\f[B]\[en]rrule\f[R] \f[I]rule\f[R]
The event\[cq]s recurrence rule.
See \f[I]Event Recurrence\f[R] under \f[B]NOTES\f[R].
.TP
\f[B]\[en]start\f[R] \f[I]YYYY-MM-DD[ HH:MM]\f[R]
The event start date(time).
.TP
\f[B]\[en]tags\f[R] \f[I]tag[,tag]\f[R]
Tags assigned to the event.
This can be a single tag or multiple tags in a comma-delimited list.
Normally with this option, any existing tags assigned to the event will
be replaced.
However, this option also supports two special operators: \f[B]+\f[R]
(add a tag to the existing tags) and \f[B]\[ti]\f[R] (remove a tag from
the existing tags).
For example, \f[I]\[en]tags +business\f[R] will add the
\f[I]business\f[R] tag to the existing tags on an event, and
\f[I]\[en]tags \[ti]meeting,presentation\f[R] will remove both the
\f[I]meeting\f[R] and \f[I]presentation\f[R] tags from an event.
.TP
\f[B]\[en]add-attachment\f[R] \f[I]URL\f[R]
Add an attachment to an event, represented by a URL.
.TP
\f[B]\[en]add-attendee\f[R] \f[I]name\f[R] \f[I]email address\f[R] \f[I]status\f[R]
Add an attendee to an event.
The attendee status should be one of: ACCEPTED, DECLINED, TENTATIVE, or
NONE.
.TP
\f[B]\[en]add-reminder\f[R] <\f[I]YYYY-MM-DD HH:MM\f[R] | \f[I]expression\f[R]> \f[I]notification\f[R]
Add a reminder to an event.
The reminder can be defined as a specific date and time, or as a
relative expression:
.RS
.IP \[bu] 2
start+/-[Xd][Yh][Zm] : a reminder relative to \f[I]start\f[R].
E.g., `start-15m' triggers a reminder 15 minutes before the
\f[I]start\f[R] datetime.
.IP \[bu] 2
end+/-[Xd][Yh][Zm] : a reminder relative to \f[I]end\f[R].
E.g., `end+1h' triggers a reminder 1 hour after the \f[I]due\f[R]
datetime.
.PP
The \f[I]notification\f[R] can be one of \f[I]display\f[R] or
\f[I]email\f[R].
A \f[I]display\f[R] notification will trigger a desktop notification and
an \f[I]email\f[R] notification will cause a reminder email to be sent.
\f[B]NOTE\f[R]: \f[B]nrrdtask\f[R] itself does not send reminders, but
produces a JSON-formatted list of reminder triggers and notification
types using the \f[B]reminders\f[R] command.
The output of \f[B]reminders\f[R] can be parsed by an application such
as \f[B]nrrdalrt\f[R] which will produce the notifications.
.RE
.TP
\f[B]\[en]del-attachment\f[R] \f[I]index\f[R]
Delete an attachment from an event.
The attachment is identified by the index displayed in the output of
\f[B]info\f[R].
.TP
\f[B]\[en]del-attendee\f[R] \f[I]index\f[R]
Delete an attendee from an event.
The attendee is identified by the index displayed in the output of
\f[B]info\f[R].
.TP
\f[B]\[en]del-reminder\f[R] \f[I]index\f[R]
Delete a reminder from an event.
The reminder is identified by the index displayed in the output of
\f[B]info\f[R].
.RE
.TP
\f[B]new\f[R] \f[I]description\f[R] [\f[I]OPTION\f[R]]\&...
Create a new event.
.RS
.PP
\f[I]OPTIONS\f[R]
.TP
\f[B]\[en]attachment\f[R] \f[I]URL\f[R]
Add an attachment to an event, represented by a URL.
.TP
\f[B]\[en]attendee\f[R] \f[I]name\f[R] \f[I]email address\f[R] \f[I]status\f[R]
Add an attendee to an event.
The attendee status should be one of: ACCEPTED, DECLINED, TENTATIVE, or
NONE.
.TP
\f[B]\[en]calendar\f[R] \f[I]calendar\f[R]
The event calendar.
.TP
\f[B]\[en]end\f[R] <\f[I]YYYY-MM-DD[ HH:MM]\f[R] | \f[I]expression\f[R]>
The event end date(time).
This may be either a specific date(time) or an expression of duration in
the form of +[Xd][Yh][Zm] (for days, hours, and minutes).
If date(time) is provided, \f[B]\[en]end\f[R] must be later than the
event \f[I]start\f[R] date.
.TP
\f[B]\[en]location\f[R] \f[I]location\f[R]
The event location.
.TP
\f[B]\[en]notes\f[R] \f[I]text\f[R]
Notes to add to the event.
See \f[B]\[en]notes\f[R] under \f[B]modify\f[R].
.TP
\f[B]\[en]organizer\f[R] \f[I]name\f[R]
The organizer for an event.
If an event has attendees and no \f[I]organizer\f[R] is specified, the
user is assumed to be the event organizer.
.TP
\f[B]\[en]reminder\f[R] <\f[I]YYYY-MM-DD HH:MM\f[R] | \f[I]expression\f[R]> \f[I]notification\f[R]
Add a reminder to an event.
See \f[B]\[en]add-reminder\f[R] under \f[B]modify\f[R].
.TP
\f[B]\[en]rrule\f[R] \f[I]rule\f[R]
The event\[cq]s recurrence rule.
See \f[I]Event Recurrence\f[R] under \f[B]NOTES\f[R].
.TP
\f[B]\[en]start\f[R] \f[I]YYYY-MM-DD[ HH:MM]\f[R]
The event start date(time).
.TP
\f[B]\[en]tags\f[R] \f[I]tag[,tag]\f[R]
Tags assigned to the event.
See \f[B]\[en]tags\f[R] under \f[B]modify\f[R].
.RE
.TP
\f[B]notes\f[R] \f[I]alias\f[R]
Add or update notes on an event using the user\[cq]s editor (defined by
the $EDITOR environment variable).
If $EDITOR is not defined, an error message will report that.
.TP
\f[B]query\f[R] \f[I]searchterm\f[R] [\f[I]OPTION\f[R]]\&...
Search for one or more events and produce plain text output (by default,
tab-delimited text).
.RS
.PP
\f[I]OPTIONS\f[R]
.TP
\f[B]-l\f[R], \f[B]\[en]limit\f[R]
Limit the output to one or more specific fields (provided as a
comma-delimited list).
.TP
\f[B]-j\f[R], \f[B]\[en]json\f[R]
Output in JSON format rather than the default tab-delimited format.
.RE
.TP
\f[B]reminders (rem)\f[R] \f[I]interval\f[R]
Output to STDOUT event reminders in JSON format for the next interval
expressed in the form [Xd][Yh][Zm] (for days, hours, and minutes).
.RS
.PP
\f[B]Examples:\f[R]
.PP
Both of these provide any reminders scheduled for the next hour.
.IP
.nf
\f[C]
nrrddate reminders 60m
nrrddate reminders 1h
\f[R]
.fi
.PP
Show reminders scheduled for the next 2 days, 12 hours, and 45 minutes:
.IP
.nf
\f[C]
nrrddate reminders 2d12h45m
\f[R]
.fi
.RE
.TP
\f[B]search\f[R] \f[I]searchterm\f[R] [\f[I]OPTION\f[R]]
Search for one or more events and output a tabular list (same format as
\f[B]list\f[R]).
.RS
.PP
\f[I]OPTIONS\f[R]
.TP
\f[B]-p\f[R], \f[B]\[en]page\f[R]
Page the command output through $PAGER.
.RE
.TP
\f[B]shell\f[R]
Launch the \f[B]nrrddate\f[R] interactive shell.
.TP
\f[B]unset\f[R] \f[I]alias\f[R] \f[I]field\f[R]
Clear a field from a specified event.
.TP
\f[B]version\f[R]
Show the application version information.
.SH NOTES
.SS Archiving an event
.PP
Use the \f[B]archive\f[R] subcommand to move the event file to the
\f[I]archive\f[R] subdirectory in the the events data directory.
Confirmation will be required for this operation unless the
\f[B]\[en]force\f[R] option is also used.
.PP
Archived events will no longer appear in lists of events.
This can be useful for retaining past events without resulting in
endlessly growing event lists.
To review archived events, create an alterate config file with a
\f[I]data_dir\f[R] pointing to the archive folder, and an alias such as:
.IP
.nf
\f[C]
alias nrrddate-archive=\[dq]nrrddate -c $HOME/.config/nrrddate/config.archive\[dq]
\f[R]
.fi
.SS Event recurrence
.PP
Events may have a recurrence rule (using the \f[B]\[en]rrule\f[R] option
to \f[B]new\f[R] and \f[B]modify\f[R]) to express that the event occurs
more than once.
The \f[I]rrule\f[R] is a semicolon-delimited list of key/value pairs.
.PP
The supported keys are:
.IP
.nf
\f[C]
- date= : (str) specific recurrence date/times, delimited by comma (,).
- except= : (str) specific date/times to be excluded, delimited by comma (,).
- freq= : (str) one of minutely, hourly, daily, weekly, monthly, or yearly.
- count= : (int) a specific number of recurrences.
- until= : (str) recur until this date/time.
- interval= : (int) the interval of recurrence.
- byhour= : (int) recur by hour (0-23).
- byweekday= : (str) one or more (comma-delimited) of SU, MO, TU, WE, TH, FR, or SA.
- bymonth= : (int) recur by month (1-12).
- bymonthday= : (int) recur by day of month (1-31).
- byyearday= : (int) recur by day of the year (1-366).
- byweekno= : (int) recur by week of year (1-53).
- bysetpos= : (int) the position in an occurence set (e.g., 1 for first, -1 for last, -2 for second to last).
\f[R]
.fi
.PP
For example, an event that recurs on the last Monday of the month until
December 31, 2021 would have the following rrule:
.IP
.nf
\f[C]
freq=monthly;byweekday=MO;bysetpos=-1;until=2021-12-31
\f[R]
.fi
.PP
\f[B]NOTE:\f[R] ensure to properly escape or quote `;' in recurrence
rules when using the \[en]rrule option on the command line.
.SS Search and query
.PP
There are two command-line methods for filtering the presented list of
events: \f[B]search\f[R] and \f[B]query\f[R].
These two similar-sounding functions perform very different roles.
.PP
Search results are output in the same tabular, human-readable format as
that of \f[B]list\f[R].
Query results are presented in the form of tab-delimited text (by
default) or JSON (if using the \f[B]-j\f[R] or \f[B]\[en]json\f[R]
option) and are primarily intended for use by other programs that are
able to consume structured text output.
.PP
Search and query use the same filter syntax.
The most basic form of filtering is to simply search for a keyword or
string in the event description:
.IP
.nf
\f[C]
nrrddate search <search_term>
\f[R]
.fi
.PP
\f[B]NOTE:\f[R] search terms are case-insensitive.
.PP
If the search term is present in the event description, the event will
be displayed.
.PP
Optionally, a search type may be specified.
The search type may be one of \f[I]uid\f[R], \f[I]alias\f[R],
\f[I]calendar\f[R], \f[I]description\f[R], \f[I]tags\f[R],
\f[I]location\f[R], \f[I]start\f[R], \f[I]end\f[R], or \f[I]notes\f[R].
If an invalid search type is provided, the search type will default to
\f[I]description\f[R].
To specify a search type, use the format:
.IP
.nf
\f[C]
nrrddate search [search_type=]<search_term>
\f[R]
.fi
.PP
You may combine search types in a comma-delimited structure.
All search criteria must be met to return a result.
.PP
The \f[I]tags\f[R] search type may also use the optional \f[B]+\f[R]
operator to search for more than one tag.
Any matched tag will return a result.
.PP
The special search term \f[I]any\f[R] can be used to match all events,
but is only useful in combination with an exclusion to match all records
except those excluded.
.SS Exclusion
.PP
In addition to the search term, an exclusion term may be provided.
Any match in the exclusion term will negate a match in the search term.
An exclusion term is formatted in the same manner as the search term,
must follow the search term, and must be denoted using the \f[B]%\f[R]
operator:
.IP
.nf
\f[C]
nrrddate search [search_type=]<search_term>%[exclusion_type=]<exclusion_term>
\f[R]
.fi
.SS Search examples
.PP
Search for any event description with the word \[lq]projectx\[rq]:
.IP
.nf
\f[C]
nrrddate search projectx
\f[R]
.fi
.PP
Search for any events that start on 2021-11-15:
.IP
.nf
\f[C]
nrrddate search start=2021-11-15
\f[R]
.fi
.PP
Search for all events tagged \[lq]development\[rq] or \[lq]testing\[rq]
with a start date between 2021-11-10 and 2021-11-12, except for those
that have a location that contains \[lq]austin\[rq]:
.IP
.nf
\f[C]
nrrddate search start=2021-11-10\[ti]2021-11-12,tags=development+testing%location=austin
\f[R]
.fi
.SS Query and limit
.PP
The \f[B]query\f[R] function uses the same syntax as \f[B]search\f[R]
but will output information in a form that may be read by other
programs.
The standard fields returned by query for tab-delimited output are:
.IP
.nf
\f[C]
- uid (string)
- alias (string)
- calendar (string)
- start (string)
- end (string)
- description (string)
- location (string)
- tags (list)
\f[R]
.fi
.PP
List fields are returned in standard Python format: [`item 1', `item 2',
\&...].
Empty lists are returned as [].
Empty string fields will appear as multiple tabs.
.PP
JSON output returns all fields for a record, including fields not
provided in tab-delimited output.
.PP
The query function may also use the \f[B]-l\f[R] or \f[B]\[en]limit\f[R]
option.
This is a comma-separated list of fields to return.
The \f[B]\[en]limit\f[R] option does not have an effect on JSON output.
.SS Paging
.PP
Output from \f[B]list\f[R], \f[B]search\f[R], and \f[B]info\f[R] can get
long and run past your terminal buffer.
You may use the \f[B]-p\f[R] or \f[B]\[en]page\f[R] option in
conjunction with \f[B]search\f[R], \f[B]list\f[R], or \f[B]info\f[R] to
page output.
.SH FILES
.TP
\f[B]\[ti]/.config/nrrddate/config\f[R]
Default configuration file
.TP
\f[B]\[ti]/.local/share/nrrddate\f[R]
Default data directory
.SH AUTHORS
.PP
Written by Sean O\[cq]Connell <https://sdoconnell.net>.
.SH BUGS
.PP
Submit bug reports at: <https://github.com/sdoconnell/nrrddate/issues>
.SH SEE ALSO
.PP
Further documentation and sources at:
<https://github.com/sdoconnell/nrrddate>
